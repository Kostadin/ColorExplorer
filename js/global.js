var fps = 30;
var colorCount = 4;
var screenWidth = 1024;
var screenHeight = 600;
var screenOriginX = 0;
var screenOriginY = 0;
var levels = [];
var currentLevel = null;
var gameRunning = false;
var colors=['red','yellow','green','blue'];
var colorBackgrounds=["url('img/platforms/red.png')","url('img/platforms/yellow.png')","url('img/platforms/green.png')","url('img/platforms/blue.png')"];
var currentColor = 0;
var currentColorCSS = colors[currentColor];
var muteSound = false;
var playerFacing = "right";
var playerDivOffsetX = -40;
var playerDivOffsetY = -15;
var enemyDivOffsetX = -35;
var enemyDivOffsetY = -30;
var parallaxRatio = 3;
//Animation counter
var animationFrame = 0;
var gameFrame = 0;
var animationRatio = 3;
//Brick types
var platform = 0;
var platformWidth = 134;
var platformHeight = 54;
var platformDivOffsetY = -10;
var portal = 1;
var portalHeight = 60;
var portalWidth = 164;
var leftPressed = false;
var rightPressed = false;
var upPressed = false;
var currentTry = 0;
var maxTries = 3;
var deadAnimationHandle = null;
var winAnimationHandle = null;
var currentLevelIndex = 0;
var deathDelayMS = 1000;
var winDelayMS = 1000;
var transitionScreenDelayMS = 1000;
var gameOverDelayMS = 3200;
var youWinDelayMS = 3000;
var opacityTransitionPerFrame = 0.10;
var $spriteXml = $('<TextureAtlas imagePath="sheet.png"><SubTexture name="bluefall.png" x="762" y="216" width="125" height="106"/><SubTexture name="blueidle1.png" x="762" y="108" width="125" height="106"/><SubTexture name="blueidle2.png" x="762" y="0" width="125" height="106"/><SubTexture name="blueidle3.png" x="635" y="756" width="125" height="106"/><SubTexture name="blueidle4.png" x="635" y="648" width="125" height="106"/><SubTexture name="bluejump.png" x="635" y="540" width="125" height="106"/><SubTexture name="bluerun1.png" x="635" y="432" width="125" height="106"/><SubTexture name="bluerun2.png" x="635" y="324" width="125" height="106"/><SubTexture name="bluerun3.png" x="635" y="216" width="125" height="106"/><SubTexture name="bluerun4.png" x="635" y="108" width="125" height="106"/><SubTexture name="bluerun5.png" x="635" y="0" width="125" height="106"/><SubTexture name="bluerun6.png" x="508" y="756" width="125" height="106"/><SubTexture name="bluerun7.png" x="508" y="648" width="125" height="106"/><SubTexture name="bluerun8.png" x="508" y="540" width="125" height="106"/><SubTexture name="greenfall.png" x="508" y="432" width="125" height="106"/><SubTexture name="greenidle1.png" x="508" y="324" width="125" height="106"/><SubTexture name="greenidle2.png" x="508" y="216" width="125" height="106"/><SubTexture name="greenidle3.png" x="508" y="108" width="125" height="106"/><SubTexture name="greenidle4.png" x="508" y="0" width="125" height="106"/><SubTexture name="greenjump.png" x="381" y="756" width="125" height="106"/><SubTexture name="greenrun1.png" x="381" y="648" width="125" height="106"/><SubTexture name="greenrun2.png" x="381" y="540" width="125" height="106"/><SubTexture name="greenrun3.png" x="381" y="432" width="125" height="106"/><SubTexture name="greenrun4.png" x="762" y="756" width="125" height="106"/><SubTexture name="greenrun5.png" x="381" y="216" width="125" height="106"/><SubTexture name="greenrun6.png" x="381" y="108" width="125" height="106"/><SubTexture name="greenrun7.png" x="381" y="0" width="125" height="106"/><SubTexture name="greenrun8.png" x="254" y="756" width="125" height="106"/><SubTexture name="redfall.png" x="254" y="648" width="125" height="106"/><SubTexture name="redidle1.png" x="254" y="540" width="125" height="106"/><SubTexture name="redidle2.png" x="254" y="432" width="125" height="106"/><SubTexture name="redidle3.png" x="254" y="324" width="125" height="106"/><SubTexture name="redidle4.png" x="254" y="216" width="125" height="106"/><SubTexture name="redjump.png" x="254" y="108" width="125" height="106"/><SubTexture name="redrun1.png" x="254" y="0" width="125" height="106"/><SubTexture name="redrun2.png" x="127" y="756" width="125" height="106"/><SubTexture name="redrun3.png" x="127" y="648" width="125" height="106"/><SubTexture name="redrun4.png" x="127" y="540" width="125" height="106"/><SubTexture name="redrun5.png" x="127" y="432" width="125" height="106"/><SubTexture name="redrun6.png" x="127" y="324" width="125" height="106"/><SubTexture name="redrun7.png" x="127" y="216" width="125" height="106"/><SubTexture name="redrun8.png" x="127" y="108" width="125" height="106"/><SubTexture name="yellowfall.png" x="127" y="0" width="125" height="106"/><SubTexture name="yellowidle1.png" x="0" y="756" width="125" height="106"/><SubTexture name="yellowidle2.png" x="0" y="648" width="125" height="106"/><SubTexture name="yellowidle3.png" x="0" y="540" width="125" height="106"/><SubTexture name="yellowidle4.png" x="0" y="432" width="125" height="106"/><SubTexture name="yellowjump.png" x="0" y="324" width="125" height="106"/><SubTexture name="yellowrun1.png" x="0" y="216" width="125" height="106"/><SubTexture name="yellowrun2.png" x="0" y="108" width="125" height="106"/><SubTexture name="yellowrun3.png" x="0" y="0" width="125" height="106"/><SubTexture name="yellowrun4.png" x="381" y="324" width="125" height="106"/><SubTexture name="yellowrun5.png" x="762" y="648" width="125" height="106"/><SubTexture name="yellowrun6.png" x="762" y="540" width="125" height="106"/><SubTexture name="yellowrun7.png" x="762" y="432" width="125" height="106"/><SubTexture name="yellowrun8.png" x="762" y="324" width="125" height="106"/></TextureAtlas>');
var $enemyXml = $('<TextureAtlas imagePath="sheet.png"><SubTexture name="attack1.png" x="127" y="108" width="125" height="106"/><SubTexture name="attack2.png" x="254" y="108" width="125" height="106"/><SubTexture name="attack3.png" x="254" y="0" width="125" height="106"/><SubTexture name="attack4.png" x="127" y="216" width="125" height="106"/><SubTexture name="attack5.png" x="254" y="216" width="125" height="106"/><SubTexture name="attack6.png" x="127" y="0" width="125" height="106"/><SubTexture name="attack7.png" x="0" y="216" width="125" height="106"/><SubTexture name="attack8.png" x="0" y="108" width="125" height="106"/><SubTexture name="attack9.png" x="0" y="0" width="125" height="106"/></TextureAtlas>');
